<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StanDex Exchange</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="./style.css">
    <script src="./abi-decoder.js"></script>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
  </head>
  <body>
    <div id="header">
      <header>
        <div id="sub-title-container">
          <h1 id="title"></h1>
          <h2 id="subtitle">Decentralized Cryptocurrency Exchange</h2>
        </div>
      </header>
    </div>

    <div class="panel panel_right">
      <h2>My Account</h2>
      <select id="myaccount" class="account"></select>
      <p class="account-info">Select your account to interact with the exchange</p>
    </div>

    <div id="main">
      <div id="main-display">
        <article>
          <div class="dashboard-header">
            <h2>Exchange Dashboard</h2>
            <p>Trade tokens and manage liquidity in the pool</p>
          </div>

          <div class="dashboard-section">
            <div id="rate-display">
              <h1 id="current-rate-title">Current Exchange Rate</h1>
              <div class="rate-info">
                <h3 id="eth-token-rate-display"></h3>
                <h3 id="token-eth-rate-display"></h3>
              </div>
            </div>

            <div id="liquidity-display">
              <h1 id="current-liquidity-title">Current Liquidity</h1>
              <div class="liquidity-info">
                <h3 id="eth-reserves"></h3>
                <h3 id="token-reserves"></h3>
              </div>
            </div>
          </div>

          <div id="swap-control">
            <h4 class="swap-control-title">Swap Currencies</h4>
            <p class="section-description">Exchange tokens for ETH or ETH for tokens at the current rate</p>

            <div class="form-group">
              <label for="amt-to-swap">Amount to Swap:</label>
              <input id="amt-to-swap" type="text" placeholder="Enter amount"/>
            </div>

            <div class="form-group">
              <label for="max-slippage-swap">Maximum Slippage Percentage:</label>
              <input id="max-slippage-swap" type="text" placeholder="Enter percentage (e.g. 5)"/>
              <small class="form-help">Maximum allowed price change during transaction processing</small>
            </div>

            <div id="swap-control-buttons">
              <button id="swap-eth"></button>
              <button id="swap-token"></button>
            </div>
          </div>

          <div id="liquidity-control">
            <h4 class="liquidity-control-title">Adjust Liquidity</h4>
            <p class="section-description">Add or remove liquidity from the pool to earn fees</p>

            <div class="form-group">
              <label for="amt-eth">Amount in ETH:</label>
              <input id="amt-eth" type="text" placeholder="Enter ETH amount"/>
            </div>

            <div class="form-group">
              <label for="max-slippage-liquid">Maximum Slippage Percentage:</label>
              <input id="max-slippage-liquid" type="text" placeholder="Enter percentage (e.g. 5)"/>
              <small class="form-help">Maximum allowed price change during transaction processing</small>
            </div>

            <div id="liquidity-control-buttons">
              <button id="add-liquidity">Add Liquidity</button>
              <button id="remove-liquidity">Remove Liquidity</button>
              <button id="remove-all-liquidity">Remove All Liquidity</button>
            </div>
          </div>

          <div id="futures-control">
            <h4 class="futures-control-title">Futures Contracts</h4>
            <p class="section-description">Create and manage futures contracts for tokens and ETH</p>

            <div id="futures-tabs">
              <button class="tab-button active" onclick="openTab(event, 'create-buy-future')">Create Buy Future</button>
              <button class="tab-button" onclick="openTab(event, 'create-sell-future')">Create Sell Future</button>
              <button class="tab-button" onclick="openTab(event, 'view-futures')">View Futures</button>
            </div>

            <div id="create-buy-future" class="tab-content" style="display: block;">
              <div class="form-group">
                <label for="buy-future-exchange-rate">Exchange Rate:</label>
                <input id="buy-future-exchange-rate" type="text" placeholder="Enter maximum exchange rate"/>
                <small class="form-help">Maximum price you're willing to pay for 1 token in ETH * 1e18</small>
              </div>

              <div class="form-group">
                <label for="buy-future-amount">Amount in ETH (wei):</label>
                <input id="buy-future-amount" type="text" placeholder="Enter ETH amount in wei"/>
              </div>

              <div class="form-group">
                <label for="buy-future-duration">Duration (days):</label>
                <input id="buy-future-duration" type="text" placeholder="Enter duration in days"/>
              </div>

              <button id="create-buy-future-btn">Create Buy Future</button>
            </div>

            <div id="create-sell-future" class="tab-content">
              <div class="form-group">
                <label for="sell-future-exchange-rate">Exchange Rate (token per wei * 1e18):</label>
                <input id="sell-future-exchange-rate" type="text" placeholder="Enter minimum exchange rate"/>
                <small class="form-help">Minimum price you're willing to accept for 1 ETH in tokens * 1e18</small>
              </div>

              <div class="form-group">
                <label for="sell-future-amount">Amount in Tokens:</label>
                <input id="sell-future-amount" type="text" placeholder="Enter token amount"/>
              </div>

              <div class="form-group">
                <label for="sell-future-duration">Duration (days):</label>
                <input id="sell-future-duration" type="text" placeholder="Enter duration in days"/>
              </div>

              <button id="create-sell-future-btn">Create Sell Future</button>
            </div>

            <div id="view-futures" class="tab-content">
              <div class="form-group">
                <button id="refresh-futures">Refresh Futures</button>
              </div>
              <div id="futures-list">
                <p>No futures contracts found.</p>
              </div>
            </div>
          </div>
        </article>

      </div>
    </div>

    <footer>
      <div class="footer-content">
        <p>&copy; 2025 BBC Exchange. All rights reserved.</p>
      </div>
    </footer>

    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
    <script type="module" src="../web_app/exchange.js"></script>
  </body>
</html>
